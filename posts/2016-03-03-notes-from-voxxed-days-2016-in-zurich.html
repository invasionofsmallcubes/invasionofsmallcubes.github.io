<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="this is my note taking app, shared with everybody"/><meta property="og:image" content="https://og-image.now.sh/Welcome%20to%20the%20Invasion%20Of%20Small%20Cubes.png?theme=dark&amp;md=0&amp;fontSize=75px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><meta name="og:title" content="Welcome to the Invasion Of Small Cubes"/><meta name="twitter:card" content="summary_large_image"/><script type="text/javascript" async="" src="https://www.googletagmanager.com/gtag/js?id=G-TX602JDKLH"></script><script type="text/javascript" async="" src="tracking.js"></script><title>Notes From Voxxed Days 2016 in Zurich</title><meta name="next-head-count" content="10"/><link rel="preload" href="/_next/static/css/8549f512080405e68560.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8549f512080405e68560.css" data-n-g=""/><link rel="preload" href="/_next/static/css/8940758a4d427170012c.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8940758a4d427170012c.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-27ce3cd164fb94df60e7.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.9707fddd9ae5927c17c3.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.44ec10f6e415a8ca6263.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-e21097dd67dbafb50e0f.js" as="script"/><link rel="preload" href="/_next/static/chunks/10cf003e655e7be2119574cd9202224517114f06.141ecfc5fd01254381c9.js" as="script"/><link rel="preload" href="/_next/static/chunks/7989c093b81d86ddb0abfb342d5bc2e84730435d.aebf37d4f0f8f63c442f.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bid%5D-26b94c598112f16fa107.js" as="script"/></head><body><div id="__next"><div class="layout_container__2t4v2"><header class="layout_header__2rhWq"><a href="/"><img src="/images/face.jpeg" class="layout_headerImage__2h5On utils_borderCircle__13qdJ" alt="The Invasion of Small Cubes"/></a><h2 class="utils_headingLg__de7p0"><a class="utils_colorInherit__3Gudf" href="/">The Invasion of Small Cubes</a></h2></header><main><article><h1 class="utils_headingXl__1XecN">Notes From Voxxed Days 2016 in Zurich</h1><div class="utils_lightText__12Ckm"><time dateTime="2016-03-03">March 3, 2016</time></div><div><h3>Kotlin - Ready for Production</h3><p>Link to <a href="https://cfp-vdz.exteso.com/program/talk/CPG-0115/Kotlin____Ready_for_production.html">schedule</a>
Kotlin is a pragmatic language, made to be efficient and avoid boilerplate code.
Intellij didn&#x27;t consider Scala because it&#x27;s a complicated language (for what they have to achieve).
Kotlin it&#x27;s not a revolution, it&#x27;s an improvement of the language they used.
Used in 10 products at Jetbrains.
You can have a look at its <a href="https://github.com/JetBrains/kotlin">repository</a>
Then many code samples, basically go <a href="https://kotlinlang.org/docs/tutorials/getting-started.html">here</a> to start.</p><h3>Speed, scale, query: can NoSQL give us all three?</h3><p>Link to <a href="https://cfp-vdz.exteso.com/program/talk/DXU-9635/Speed__scale__query__can_NoSQL_give_us_all_three_.html">schedule</a>
Can we achieve all those three feature now that NoSQL is mature?
What does have an impact on those?:</p><ul><li>NoSQL non-relational types: key-value, document, columnar, graph</li><li>Architecture: master-slave, master-master (distributed topology or replicated). With distributed you got availability, with replicated you get eventual consistency but dataset must fit one machine</li></ul><p>So, what we could have:</p><ul><li>one single server key-value: it&#x27;s fast, not scalable</li><li>master-salve document: eventual consistency, single point of failure, query could be slower</li><li>dynamo-like distribued master-master column store: eventual consistency, the data model favour writes but architecture favour reads, there is no single point of failure</li><li>distribued master-master, strong consistency, document: data model has simple get and set, scalable, consistency.</li></ul><h3>Lambda core - hardcore</h3><p>Link to <a href="https://cfp-vdz.exteso.com/program/talk/WCB-3457/Lambda_core___hardcore.html">schedule</a>
Presentation not useful for our daily job!
Lambda (by Alonzo Church) from Lambda Calculus, a lot of math.</p><pre style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#2a2734;color:#9a86fd;padding:1em;margin:.5em 0;overflow:auto"><code class="language-java" style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#2a2734;color:#9a86fd"><span>lambda identity </span><span class="token" style="color:#e09142">=</span><span> x </span><span class="token" style="color:#e09142">-&gt;</span><span> x
</span><span>lambda funny </span><span class="token" style="color:#e09142">=</span><span> a</span><span class="token" style="color:#e09142">-&gt;</span><span>identity</span></code></pre><p>so funny.apply(funny) equals to identity</p><pre style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#2a2734;color:#9a86fd;padding:1em;margin:.5em 0;overflow:auto"><code class="language-java" style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#2a2734;color:#9a86fd"><span>lambda aTrue </span><span class="token" style="color:#e09142">=</span><span> x</span><span class="token" style="color:#e09142">-&gt;</span><span>y</span><span class="token" style="color:#e09142">-&gt;</span><span>x</span><span class="token" style="color:#6c6783">;</span><span>
</span><span>lambda aFalse </span><span class="token" style="color:#e09142">=</span><span> x</span><span class="token" style="color:#e09142">-&gt;</span><span>y</span><span class="token" style="color:#e09142">-&gt;</span><span>y</span><span class="token" style="color:#6c6783">;</span><span>
</span><span>lambda and </span><span class="token" style="color:#e09142">=</span><span> </span><span class="token" style="color:#6c6783">(</span><span>p</span><span class="token" style="color:#6c6783">)</span><span class="token" style="color:#e09142">-&gt;</span><span class="token" style="color:#6c6783">(</span><span>q</span><span class="token" style="color:#6c6783">)</span><span class="token" style="color:#e09142">-&gt;</span><span>p</span><span class="token" style="color:#6c6783">.</span><span class="token" style="color:#9a86fd">apply</span><span class="token" style="color:#6c6783">(</span><span>q</span><span class="token" style="color:#6c6783">)</span><span class="token" style="color:#6c6783">.</span><span class="token" style="color:#9a86fd">apply</span><span class="token" style="color:#6c6783">(</span><span>p</span><span class="token" style="color:#6c6783">)</span><span class="token" style="color:#6c6783">;</span><span>
</span><span>lambda or </span><span class="token" style="color:#e09142">=</span><span> </span><span class="token" style="color:#6c6783">(</span><span>p</span><span class="token" style="color:#6c6783">)</span><span class="token" style="color:#e09142">-&gt;</span><span class="token" style="color:#6c6783">(</span><span>q</span><span class="token" style="color:#6c6783">)</span><span class="token" style="color:#e09142">-&gt;</span><span>p</span><span class="token" style="color:#6c6783">.</span><span class="token" style="color:#9a86fd">apply</span><span class="token" style="color:#6c6783">(</span><span>p</span><span class="token" style="color:#6c6783">)</span><span class="token" style="color:#6c6783">.</span><span class="token" style="color:#9a86fd">apply</span><span class="token" style="color:#6c6783">(</span><span>q</span><span class="token" style="color:#6c6783">)</span><span class="token" style="color:#6c6783">;</span></code></pre><p>I took this note, then he goes on defining with lambdas key structure of a procedural language, eg:</p><pre style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#2a2734;color:#9a86fd;padding:1em;margin:.5em 0;overflow:auto"><code class="language-java" style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#2a2734;color:#9a86fd"><span class="token class-name">Lambda</span><span> ifLambda </span><span class="token" style="color:#e09142">=</span><span> </span><span class="token" style="color:#6c6783">(</span><span>c</span><span class="token" style="color:#6c6783">)</span><span class="token" style="color:#e09142">-&gt;</span><span class="token" style="color:#6c6783">(</span><span>t</span><span class="token" style="color:#6c6783">)</span><span class="token" style="color:#e09142">-&gt;</span><span class="token" style="color:#6c6783">(</span><span>f</span><span class="token" style="color:#6c6783">)</span><span class="token" style="color:#e09142">-&gt;</span><span>c</span><span class="token" style="color:#6c6783">.</span><span class="token" style="color:#9a86fd">apply</span><span class="token" style="color:#6c6783">(</span><span>t</span><span class="token" style="color:#6c6783">)</span><span class="token" style="color:#6c6783">.</span><span class="token" style="color:#9a86fd">apply</span><span class="token" style="color:#6c6783">(</span><span>f</span><span class="token" style="color:#6c6783">)</span><span class="token" style="color:#6c6783">.</span><span class="token" style="color:#9a86fd">apply</span><span class="token" style="color:#6c6783">(</span><span>x</span><span class="token" style="color:#e09142">-&gt;</span><span>x</span><span class="token" style="color:#6c6783">)</span></code></pre><p>Everything can be done purely functional without side effect and mutability :)
Since it&#x27;s possible, we should do it!</p><h3>No more stress with the tests - Stresstesting with Gatling!</h3><p>Link to <a href="https://cfp-vdz.exteso.com/program/talk/BED-0378/No_more_stress_with_the_tests___Stresstesting_with_Gatling_.html">schedule</a>
For your stresstest use <a href="http://gatling.io">gatling</a>
Based on Scala, Akka and Netty IO framework.
The gatling recorder act as a proxy between your browser and the server so that it can record macros.
Once the recorder has generated the script, you can actually write code about it with Scala directly.
Gatling supports Graphana dashboard to have real time monitoring.</p><h3>G1 Garbage Collector: details and tuning</h3><p>Link to <a href="https://cfp-vdz.exteso.com/program/talk/NSP-4199/G1_Garbage_Collector__details_and_tuning.html">schedule</a>
G1 is low-pause collector, since JDK7. Replace for CMS.
Low pause is valued more than max throughput for majority of Java apps.
You just need Xmx and the max stop-the-world pause you want in millis.
G1 is for young and old generation.
Young generation is stop-the-world, parallel, copying.
Old generation is concurrency marking but don&#x27;t recall the space.</p><p>Keep G1 logging on always!! (almost no overhead)</p><p>G1 divides heap in small regions with a name: Eden, Survivor, Old regions and Homoungous which is a new region reserved for big objects.</p><p>G1 prepares Eden regions, application fills those regions. When Eden regions are full -&gt; Young GC.
You can have pointers from old region to new region.</p><p>The Remembered Set keeps which information about external objects pointing to objects in its region.</p><p>The JVM has a write barrier that tracks inter-region pointers updates. It happens when you launch <code>object.field = &lt;ref&gt;</code>.</p><p>G1 Young Gen phases:</p><ul><li>stops the world</li><li>the regions that will be subjects to collection</li><li>root scanning</li><li>updated remembered set</li><li>process remembered set (understand actually which objects are alive in Eden)</li><li>object copy (live objects copied to survivor/old regions)</li><li>reference processing (soft, weak, phantom, final, jni weak references)</li></ul><p>G1 Old Gen is scheduled when heap is 45% full. It&#x27;s checked after young gc or humongous allocation.
G1 Old GC does only concurrent marking (using tri-color marking).
G1 uses Snapshot-at-the-beginning technique that basically use a write barrier <code>B.c = null</code> and saves C as to be analyzed at the next remark because <code>B.c = null</code>can consider c not more pointed by anyone but while marking, the application could do an assignment to c and G1 wouldn&#x27;t know. Because of this, G1 works better if it has more space than need to retain floating garbage to get collected at the next cycle.
After this cleans up empty old regions (empty meaning that there is no pointer to it).</p><p>G1 deals with old regions that has some live reference in them in this way: it divides mixed old regions by 8, it takes those region, move live objects to another old region and clean this now that is full of garbage. It consider mixed regions to have only 5% of live objects (so moving them it&#x27;s really quick).</p><p>You should avoid humongous allocations increasing heap size and region size.
Find cause of WeakReferences (ThreadLocals, RMI and Third party libraries).</p><h3>What is Pure Functional programming, and how it can improve our application testing?</h3><p>Link to <a href="https://cfp-vdz.exteso.com/program/talk/FPX-6471/What_is_Pure_Functional_programming__and_how_it_can_improve_our_application_testing_.html">schedule</a>
Functional programming: functions are values and can be used as arguments and basically can be used as value. They are focused on evaluating expression (what we want to do, not how) and not executing instructions.
In pure functional programming, every expression is pure, therefor it has referential transparency: an expression can be changed by its value without changing the behavior of a program:</p><pre style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#2a2734;color:#9a86fd;padding:1em;margin:.5em 0;overflow:auto"><code class="language-java" style="font-family:Consolas, Menlo, Monaco, &quot;Andale Mono WT&quot;, &quot;Andale Mono&quot;, &quot;Lucida Console&quot;, &quot;Lucida Sans Typewriter&quot;, &quot;DejaVu Sans Mono&quot;, &quot;Bitstream Vera Sans Mono&quot;, &quot;Liberation Mono&quot;, &quot;Nimbus Mono L&quot;, &quot;Courier New&quot;, Courier, monospace;font-size:14px;line-height:1.375;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;background:#2a2734;color:#9a86fd"><span>sum</span><span class="token" style="color:#e09142">:</span><span> </span><span class="token" style="color:#6c6783">(</span><span class="token" style="color:#ffcc99">int</span><span class="token" style="color:#6c6783">,</span><span> </span><span class="token" style="color:#ffcc99">int</span><span class="token" style="color:#6c6783">)</span><span> </span><span class="token" style="color:#e09142">-&gt;</span><span> </span><span class="token" style="color:#ffcc99">int</span><span>
</span><span>sum</span><span class="token" style="color:#e09142">:</span><span> a b </span><span class="token" style="color:#e09142">=</span><span> a </span><span class="token" style="color:#e09142">+</span><span> b
</span><span>sum </span><span class="token" style="color:#e09142">2</span><span> </span><span class="token" style="color:#e09142">3</span><span> </span><span class="token" style="color:#e09142">=</span><span> </span><span class="token" style="color:#e09142">5</span><span>
</span><span>sum </span><span class="token" style="color:#e09142">2</span><span> </span><span class="token" style="color:#e09142">3</span><span> </span><span class="token" style="color:#e09142">=</span><span> </span><span class="token" style="color:#e09142">5</span><span> </span><span class="token" style="color:#6c6783">// always the the same output given the same input</span></code></pre><p>Testing pure code is far more easier because of referential transparency.
Testing with functions can abstract much better the business logic.
The secret is to separate the domain from the complexity of operations on the the edge of the domain.
Also tests must be deterministic.</p><p><a href="http://www.slideshare.net/ScottWlaschin/an-introduction-to-property-based-testing">Property based testing</a> means that generates a lot of random values with fixed properties that are invariant towards the tests. You use properties instead of assertions. Property based testing is easier with pure fp, because every time you generate the same property, you get the same output.</p><p>You should separates pure part from impure part. For pure parts you get unit testing and property testing, for impure part you get integration tests (impure parts are the one that communicates with a database for example).</p> </div></article></main><div class="layout_backToHome__1vZsp"><a href="/">← Back to home</a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"2016-03-03-notes-from-voxxed-days-2016-in-zurich","c":"### Kotlin - Ready for Production\nLink to [schedule](https://cfp-vdz.exteso.com/program/talk/CPG-0115/Kotlin____Ready_for_production.html)\nKotlin is a pragmatic language, made to be efficient and avoid boilerplate code.\nIntellij didn't consider Scala because it's a complicated language (for what they have to achieve).\nKotlin it's not a revolution, it's an improvement of the language they used.\nUsed in 10 products at Jetbrains.\nYou can have a look at its [repository](https://github.com/JetBrains/kotlin)\nThen many code samples, basically go [here](https://kotlinlang.org/docs/tutorials/getting-started.html) to start.\n\n### Speed, scale, query: can NoSQL give us all three?\nLink to [schedule](https://cfp-vdz.exteso.com/program/talk/DXU-9635/Speed__scale__query__can_NoSQL_give_us_all_three_.html)\nCan we achieve all those three feature now that NoSQL is mature?\nWhat does have an impact on those?:\n- NoSQL non-relational types: key-value, document, columnar, graph\n- Architecture: master-slave, master-master (distributed topology or replicated). With distributed you got availability, with replicated you get eventual consistency but dataset must fit one machine\n\nSo, what we could have:\n- one single server key-value: it's fast, not scalable\n- master-salve document: eventual consistency, single point of failure, query could be slower\n- dynamo-like distribued master-master column store: eventual consistency, the data model favour writes but architecture favour reads, there is no single point of failure\n- distribued master-master, strong consistency, document: data model has simple get and set, scalable, consistency.\n\n### Lambda core - hardcore\nLink to [schedule](https://cfp-vdz.exteso.com/program/talk/WCB-3457/Lambda_core___hardcore.html)\nPresentation not useful for our daily job!\nLambda (by Alonzo Church) from Lambda Calculus, a lot of math.\n\n~~~~~~~~ java\nlambda identity = x -\u003e x\nlambda funny = a-\u003eidentity\n~~~~~~~~\n\nso funny.apply(funny) equals to identity\n\n~~~~~~~~ java\nlambda aTrue = x-\u003ey-\u003ex;\nlambda aFalse = x-\u003ey-\u003ey;\nlambda and = (p)-\u003e(q)-\u003ep.apply(q).apply(p);\nlambda or = (p)-\u003e(q)-\u003ep.apply(p).apply(q);\n~~~~~~~~\n\nI took this note, then he goes on defining with lambdas key structure of a procedural language, eg:\n\n~~~~~~~~ java\nLambda ifLambda = (c)-\u003e(t)-\u003e(f)-\u003ec.apply(t).apply(f).apply(x-\u003ex)\n~~~~~~~~\n\nEverything can be done purely functional without side effect and mutability :)\nSince it's possible, we should do it!\n\n### No more stress with the tests - Stresstesting with Gatling!\nLink to [schedule](https://cfp-vdz.exteso.com/program/talk/BED-0378/No_more_stress_with_the_tests___Stresstesting_with_Gatling_.html)\nFor your stresstest use [gatling](http://gatling.io)\nBased on Scala, Akka and Netty IO framework.\nThe gatling recorder act as a proxy between your browser and the server so that it can record macros.\nOnce the recorder has generated the script, you can actually write code about it with Scala directly.\nGatling supports Graphana dashboard to have real time monitoring.\n\n### G1 Garbage Collector: details and tuning\nLink to [schedule](https://cfp-vdz.exteso.com/program/talk/NSP-4199/G1_Garbage_Collector__details_and_tuning.html)\nG1 is low-pause collector, since JDK7. Replace for CMS.\nLow pause is valued more than max throughput for majority of Java apps.\nYou just need Xmx and the max stop-the-world pause you want in millis.\nG1 is for young and old generation.\nYoung generation is stop-the-world, parallel, copying.\nOld generation is concurrency marking but don't recall the space.\n\nKeep G1 logging on always!! (almost no overhead)\n\nG1 divides heap in small regions with a name: Eden, Survivor, Old regions and Homoungous which is a new region reserved for big objects.\n\nG1 prepares Eden regions, application fills those regions. When Eden regions are full -\u003e Young GC.\nYou can have pointers from old region to new region.\n\nThe Remembered Set keeps which information about external objects pointing to objects in its region.\n\nThe JVM has a write barrier that tracks inter-region pointers updates. It happens when you launch `object.field = \u003cref\u003e`.\n\nG1 Young Gen phases:\n- stops the world\n- the regions that will be subjects to collection\n- root scanning\n- updated remembered set\n- process remembered set (understand actually which objects are alive in Eden)\n- object copy (live objects copied to survivor/old regions)\n- reference processing (soft, weak, phantom, final, jni weak references)\n\nG1 Old Gen is scheduled when heap is 45% full. It's checked after young gc or humongous allocation.\nG1 Old GC does only concurrent marking (using tri-color marking).\nG1 uses Snapshot-at-the-beginning technique that basically use a write barrier `B.c = null` and saves C as to be analyzed at the next remark because `B.c = null`can consider c not more pointed by anyone but while marking, the application could do an assignment to c and G1 wouldn't know. Because of this, G1 works better if it has more space than need to retain floating garbage to get collected at the next cycle.\nAfter this cleans up empty old regions (empty meaning that there is no pointer to it).\n\nG1 deals with old regions that has some live reference in them in this way: it divides mixed old regions by 8, it takes those region, move live objects to another old region and clean this now that is full of garbage. It consider mixed regions to have only 5% of live objects (so moving them it's really quick).\n\nYou should avoid humongous allocations increasing heap size and region size.\nFind cause of WeakReferences (ThreadLocals, RMI and Third party libraries).\n\n### What is Pure Functional programming, and how it can improve our application testing?\nLink to [schedule](https://cfp-vdz.exteso.com/program/talk/FPX-6471/What_is_Pure_Functional_programming__and_how_it_can_improve_our_application_testing_.html)\nFunctional programming: functions are values and can be used as arguments and basically can be used as value. They are focused on evaluating expression (what we want to do, not how) and not executing instructions.\nIn pure functional programming, every expression is pure, therefor it has referential transparency: an expression can be changed by its value without changing the behavior of a program:\n\n~~~~~~~~ java\nsum: (int, int) -\u003e int\nsum: a b = a + b\nsum 2 3 = 5\nsum 2 3 = 5 // always the the same output given the same input\n~~~~~~~~\n\nTesting pure code is far more easier because of referential transparency.\nTesting with functions can abstract much better the business logic.\nThe secret is to separate the domain from the complexity of operations on the the edge of the domain.\nAlso tests must be deterministic.\n\n[Property based testing](http://www.slideshare.net/ScottWlaschin/an-introduction-to-property-based-testing) means that generates a lot of random values with fixed properties that are invariant towards the tests. You use properties instead of assertions. Property based testing is easier with pure fp, because every time you generate the same property, you get the same output.\n\nYou should separates pure part from impure part. For pure parts you get unit testing and property testing, for impure part you get integration tests (impure parts are the one that communicates with a database for example).\n","title":"Notes From Voxxed Days 2016 in Zurich","date":"2016-03-03"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"2016-03-03-notes-from-voxxed-days-2016-in-zurich"},"buildId":"IQnrlqNLdFrJxvsC0AeXq","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-fa276ba060a4a8ac7eef.js"></script><script src="/_next/static/chunks/main-27ce3cd164fb94df60e7.js" async=""></script><script src="/_next/static/chunks/webpack-e067438c4cf4ef2ef178.js" async=""></script><script src="/_next/static/chunks/framework.9707fddd9ae5927c17c3.js" async=""></script><script src="/_next/static/chunks/commons.44ec10f6e415a8ca6263.js" async=""></script><script src="/_next/static/chunks/pages/_app-e21097dd67dbafb50e0f.js" async=""></script><script src="/_next/static/chunks/10cf003e655e7be2119574cd9202224517114f06.141ecfc5fd01254381c9.js" async=""></script><script src="/_next/static/chunks/7989c093b81d86ddb0abfb342d5bc2e84730435d.aebf37d4f0f8f63c442f.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-26b94c598112f16fa107.js" async=""></script><script src="/_next/static/IQnrlqNLdFrJxvsC0AeXq/_buildManifest.js" async=""></script><script src="/_next/static/IQnrlqNLdFrJxvsC0AeXq/_ssgManifest.js" async=""></script></body></html>